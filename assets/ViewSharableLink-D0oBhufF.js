import{r as d,j as e,b as m,k as f,A as j,l as D,a as u,m as k,P as A,n as S,o as B,p as C,F as w,T as L,q as M,e as E,t as F,v as H,g as b}from"./index-BLvTVYQK.js";const I=o=>{const{availableDays:t=[],day:a,outsideCurrentMonth:l,...n}=o,c=u(),s=t.some(i=>i.month===a.month()+1&&i.date===a.date()),x=!s;return e.jsx(k,{overlap:"circular",badgeContent:s?"âœ”":void 0,sx:{".MuiBadge-badge":{backgroundColor:s?"green":"transparent",color:s?"white":"transparent"}},children:e.jsx(A,{...n,day:a,onClick:()=>{const i=a.format("YYYY-MM-DD");c(S(i)),c(B())},outsideCurrentMonth:l,disabled:x})},a.toString())};function T({availability:o}){const[t,a]=d.useState([]),[l,n]=d.useState(!1);return d.useEffect(()=>{(async()=>{n(!0);try{a(o)}catch(s){console.error("Error fetching availability:",s)}finally{n(!1)}})()},[o]),e.jsx(m,{boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px;",borderRadius:7,children:e.jsx(f,{dateAdapter:j,children:e.jsx(D,{loading:l,renderLoading:()=>e.jsx("p",{children:"Loading..."}),slots:{day:I},slotProps:{day:{availableDays:t}}})})})}const P=()=>{const{id:o}=C(),t=u(),[a,l]=d.useState({name:"",email:"",availability:[]}),n=async r=>{const h=`https://connect-one-one-uniconn-1.onrender.com/api/v1/configure-session?id=${o}&bookerTimeZone=${r}`;t(E());try{const p=await fetch(h),{info:{name:g,email:v,convertedAvailability:y}}=await p.json();l({...a,name:g,email:v,availability:y}),t(F({id:o,bookerTimeZone:r})),t(H(y)),t(b())}catch{t(b())}},c=()=>{t(M());const r=Intl.DateTimeFormat().resolvedOptions().timeZone;n(r)};d.useEffect(c,[]);const s=[{name:"Book an",c:"black"},{name:"One:One",c:"#4C9FEB"},{name:"Session with",c:"black"},{name:a.name,c:"#4C9FEB"}],x={gap:["2px","3px","5px","10px"],justifyContent:"center",fontSize:["15","20","20","24px"],fontWeight:"600",alignItems:"center"},i={marginTop:10};return e.jsxs(m,{w:"100%",h:"100vh",sx:i,children:[e.jsx(w,{sx:x,children:s.map(({name:r,c:h},p)=>e.jsx(L,{color:h,children:r},p))}),e.jsx(m,{w:["90%","65%","40%","30%"],margin:"auto",mt:10,children:e.jsx(T,{availability:a.availability})})]})};export{P as default};
